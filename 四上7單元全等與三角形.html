<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä¸‰è§’å½¢è®Šè®Šè®Šï¼šå…¨ç­‰èˆ‡åˆ†é¡</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Google Fonts: Noto Sans TC -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap" rel="stylesheet">
    
    <style>
        body { 
            font-family: 'Noto Sans TC', sans-serif; 
            touch-action: manipulation;
            background-color: #f0fdf4; /* emerald-50 */
        }
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
        
        /* Fun Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        .animate-float { animation: float 3s ease-in-out infinite; }
        
        @keyframes pop {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .animate-pop { animation: pop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }

        .btn-press { transition: transform 0.1s; }
        .btn-press:active { transform: scale(0.95); }
    </style>
</head>
<body class="text-slate-800 select-none">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- SVG Icons Components ---
        const Icon = ({ children, className = "", size = 24, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>{children}</svg>
        );
        const PlayIcon = (props) => <Icon {...props}><polygon points="5 3 19 12 5 21 5 3" fill="currentColor"/></Icon>;
        const BookIcon = (props) => <Icon {...props}><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></Icon>;
        const GameIcon = (props) => <Icon {...props}><line x1="6" x2="10" y1="12" y2="12"/><line x1="8" x2="8" y1="10" y2="14"/><line x1="15" x2="15.01" y1="13" y2="13"/><line x1="18" x2="18.01" y1="11" y2="11"/><rect width="20" height="12" x="2" y="6" rx="2"/></Icon>;
        const StarIcon = (props) => <Icon {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" /></Icon>;
        const CheckIcon = (props) => <Icon {...props}><polyline points="20 6 9 17 4 12"/></Icon>;
        const RefreshIcon = (props) => <Icon {...props}><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></Icon>;
        const ShapesIcon = (props) => <Icon {...props}><path d="M8.3 10a.7.7 0 0 1-.626-1.079l1.45-2.212a.7.7 0 0 1 1.152 0l1.45 2.212A.7.7 0 0 1 11.1 10H8.3z"/><rect x="14" y="14" width="4" height="4" rx="1"/><circle cx="6" cy="18" r="2"/></Icon>;
        const RulerIcon = (props) => <Icon {...props}><path d="M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z"/><line x1="14.5" x2="13.4" y1="12.5" y2="13.6"/><line x1="11.5" x2="10.4" y1="15.5" y2="16.6"/><line x1="8.5" x2="7.4" y1="18.5" y2="19.6"/></Icon>;

        // --- Helper Components ---
        const TriangleShape = ({ type, size = 100, color = "#10b981", rotate = 0, className="" }) => {
            // Simple paths for different triangles scaled to ~100x100 box
            let points = "";
            let label = "";
            
            switch(type) {
                case 'right': // ç›´è§’
                    points = "20,20 20,80 80,80"; 
                    label = "âˆŸ";
                    break;
                case 'acute': // éŠ³è§’ (equilateral-ish)
                    points = "50,15 15,85 85,85";
                    break;
                case 'obtuse': // éˆè§’
                    points = "20,80 80,80 95,30"; // Very obtuse
                    break;
                case 'equilateral': // æ­£ä¸‰è§’å½¢
                    points = "50,10 10,80 90,80";
                    break;
                case 'isosceles': // ç­‰è…°
                    points = "50,10 30,80 70,80"; // Narrow isosceles
                    break;
                default:
                    points = "50,10 10,90 90,90";
            }

            return (
                <div className={`relative flex items-center justify-center ${className}`} style={{ width: size, height: size }}>
                    <svg width="100%" height="100%" viewBox="0 0 100 100" style={{ transform: `rotate(${rotate}deg)`, transition: 'transform 0.5s' }}>
                        <polygon points={points} fill={color} stroke="currentColor" strokeWidth="4" strokeLinejoin="round" className="drop-shadow-sm"/>
                        {type === 'right' && (
                            <path d="M20,70 L30,70 L30,80" fill="none" stroke="white" strokeWidth="2" />
                        )}
                    </svg>
                </div>
            );
        };

        // --- 1. Learning Section ---
        const LearnSection = ({ onFinish }) => {
            const [activeCard, setActiveCard] = useState(null);

            const concepts = [
                { id: 'right', name: 'ç›´è§’ä¸‰è§’å½¢', desc: 'æœ‰ä¸€å€‹è§’æ˜¯ç›´è§’ (90åº¦)ï¼Œåƒæ­£æ–¹å½¢çš„è§’è½ä¸€æ¨£ã€‚', type: 'right', color: 'bg-blue-100 text-blue-700' },
                { id: 'obtuse', name: 'éˆè§’ä¸‰è§’å½¢', desc: 'æœ‰ä¸€å€‹è§’å¤§å¤§çš„ï¼Œæ¯”ç›´è§’é‚„å¤§ï¼Œå«åšéˆè§’ã€‚', type: 'obtuse', color: 'bg-orange-100 text-orange-700' },
                { id: 'acute', name: 'éŠ³è§’ä¸‰è§’å½¢', desc: 'ä¸‰å€‹è§’éƒ½å°–å°–çš„ï¼Œæ¯”ç›´è§’é‚„å°ã€‚', type: 'acute', color: 'bg-green-100 text-green-700' },
                { id: 'equilateral', name: 'æ­£ä¸‰è§’å½¢', desc: 'ä¸‰æ¢é‚Šéƒ½ä¸€æ¨£é•·ï¼Œä¸‰å€‹è§’ä¹Ÿä¸€æ¨£å¤§ã€‚', type: 'equilateral', color: 'bg-purple-100 text-purple-700' },
                { id: 'congruence', name: 'å…¨ç­‰ (é›™èƒèƒ)', desc: 'å½¢ç‹€ã€å¤§å°ä¸€æ¨¡ä¸€æ¨£ï¼Œç–Šåœ¨ä¸€èµ·æœƒå®Œå…¨é‡åˆã€‚è½‰å½æˆ–ç¿»é¢ä¹Ÿæ˜¯å…¨ç­‰å–”ï¼', type: 'congruence', color: 'bg-pink-100 text-pink-700' },
            ];

            return (
                <div className="space-y-6 animate-pop">
                    <div className="bg-white rounded-3xl overflow-hidden shadow-lg border-4 border-emerald-200">
                        <div className="aspect-video w-full relative bg-slate-900">
                            <iframe 
                                className="absolute top-0 left-0 w-full h-full"
                                src="https://www.youtube.com/embed/DWwb8Z9mF8I" 
                                title="ä¸‰è§’å½¢èˆ‡å…¨ç­‰æ•™å­¸å½±ç‰‡" 
                                frameBorder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                allowFullScreen
                            ></iframe>
                        </div>
                        <div className="p-4 bg-emerald-50">
                            <h2 className="text-xl font-bold text-emerald-800 flex items-center">
                                <PlayIcon className="mr-2" /> è§€å¿µå°å½±ç‰‡
                            </h2>
                            <p className="text-emerald-600">å…ˆçœ‹å½±ç‰‡ï¼Œèªè­˜å„ç¨®ä¸‰è§’å½¢æœ‹å‹ï¼</p>
                        </div>
                    </div>

                    <div className="grid grid-cols-2 gap-3">
                        {concepts.map((c) => (
                            <button 
                                key={c.id}
                                onClick={() => setActiveCard(activeCard === c.id ? null : c.id)}
                                className={`btn-press p-4 rounded-2xl border-b-4 text-left transition-all relative overflow-hidden ${c.color} ${activeCard === c.id ? 'border-transparent ring-4 ring-offset-2 ring-emerald-300 scale-105 z-10 shadow-xl' : 'border-black/10 shadow-md'}`}
                            >
                                <div className="flex flex-col items-center mb-2">
                                    {c.id === 'congruence' ? (
                                        <div className="flex">
                                            <TriangleShape type="right" size={40} color="#db2777" />
                                            <TriangleShape type="right" size={40} color="#db2777" rotate={90} />
                                        </div>
                                    ) : (
                                        <TriangleShape type={c.type} size={60} color="currentColor" className="opacity-80" />
                                    )}
                                </div>
                                <h3 className="text-lg font-bold text-center">{c.name}</h3>
                                {activeCard === c.id && (
                                    <div className="mt-2 text-sm font-medium bg-white/60 p-2 rounded-lg animate-pop">
                                        {c.desc}
                                    </div>
                                )}
                            </button>
                        ))}
                    </div>
                    
                    <button onClick={onFinish} className="w-full py-4 bg-slate-800 text-white rounded-2xl font-bold text-xl shadow-lg btn-press flex justify-center items-center">
                        æˆ‘å­¸æœƒäº†ï¼Œå»ç©éŠæˆ²ï¼ <GameIcon className="ml-2" />
                    </button>
                </div>
            );
        };

        // --- 2. Congruence Game (Stamp Matching) ---
        const CongruenceGame = ({ onFinish }) => {
            const [level, setLevel] = useState(0);
            const [feedback, setFeedback] = useState(null); // 'correct', 'wrong'

            const questions = [
                { id: 1, target: { type: 'right', rotate: 0, color: '#3b82f6' }, 
                  options: [
                      { type: 'right', rotate: 180, color: '#3b82f6', correct: true }, // Correct (Rotated)
                      { type: 'equilateral', rotate: 0, color: '#ef4444', correct: false }, // Wrong shape
                      { type: 'right', scale: 0.5, color: '#3b82f6', correct: false } // Wrong size (simulated by type for now, simplified) -> Actually let's just use different shapes for simplicity in code
                  ] 
                },
                { id: 2, target: { type: 'obtuse', rotate: 0, color: '#f97316' },
                  options: [
                      { type: 'right', rotate: 0, color: '#f97316', correct: false },
                      { type: 'obtuse', rotate: 45, color: '#f97316', correct: true },
                      { type: 'acute', rotate: 0, color: '#f97316', correct: false }
                  ]
                },
                { id: 3, target: { type: 'acute', rotate: 0, color: '#10b981' },
                  options: [
                      { type: 'acute', rotate: 90, color: '#10b981', correct: true },
                      { type: 'right', rotate: 0, color: '#10b981', correct: false },
                      { type: 'equilateral', rotate: 0, color: '#ef4444', correct: false } // Distinct color distractor
                  ]
                }
            ];

            const currentQ = questions[level];

            const handleChoice = (isCorrect) => {
                if(feedback) return;
                if(isCorrect) {
                    setFeedback('correct');
                    setTimeout(() => {
                        if(level < questions.length - 1) {
                            setLevel(l => l + 1);
                            setFeedback(null);
                        } else {
                            onFinish();
                        }
                    }, 1000);
                } else {
                    setFeedback('wrong');
                    setTimeout(() => setFeedback(null), 1000);
                }
            }

            return (
                <div className="flex flex-col items-center space-y-8 animate-pop">
                    <div className="bg-pink-100 px-6 py-3 rounded-full border-2 border-pink-300">
                        <h2 className="font-bold text-pink-700 flex items-center"><ShapesIcon className="mr-2"/> å…¨ç­‰åµæ¢ï¼šæ‰¾é›™èƒèƒ</h2>
                    </div>

                    <div className="flex flex-col items-center bg-white p-6 rounded-3xl shadow-lg border-2 border-slate-100">
                        <p className="mb-4 text-slate-500 font-bold">é€™æ˜¯é¡Œç›®ï¼š</p>
                        <div className="p-4 bg-slate-50 rounded-xl border-2 border-dashed border-slate-300">
                            <TriangleShape type={currentQ.target.type} rotate={currentQ.target.rotate} color={currentQ.target.color} size={120} />
                        </div>
                    </div>

                    <div className="grid grid-cols-3 gap-4 w-full">
                        {currentQ.options.map((opt, idx) => (
                            <button 
                                key={idx}
                                onClick={() => handleChoice(opt.correct)}
                                className={`btn-press bg-white p-4 rounded-2xl shadow-md border-b-4 border-slate-200 flex justify-center items-center transition-all
                                    ${feedback === 'correct' && opt.correct ? 'bg-green-100 border-green-400 ring-2 ring-green-400' : ''}
                                    ${feedback === 'wrong' && !opt.correct ? 'opacity-50' : ''}
                                `}
                            >
                                <TriangleShape type={opt.type} rotate={opt.rotate} color={opt.color} size={80} />
                            </button>
                        ))}
                    </div>

                    <div className="h-8">
                        {feedback === 'correct' && <div className="text-2xl font-black text-green-500 flex items-center animate-bounce"><CheckIcon className="mr-2"/> ç­”å°äº†ï¼</div>}
                        {feedback === 'wrong' && <div className="text-xl font-bold text-red-500 animate-shake">å†è©¦è©¦çœ‹ï¼å½¢ç‹€è¦ä¸€æ¨£å–”</div>}
                    </div>
                </div>
            );
        };

        // --- 3. Sorting Game (Classification) ---
        const SortingGame = ({ onFinish }) => {
            const [qIndex, setQIndex] = useState(0);
            const [score, setScore] = useState(0);
            const [showResult, setShowResult] = useState(false);

            // Mix of questions: Angle types and Side types
            const questions = [
                { type: 'right', color: '#3b82f6', ans: 'right', hint: 'æœ‰ä¸€å€‹ç›´è§’' },
                { type: 'obtuse', color: '#f97316', ans: 'obtuse', hint: 'æœ‰ä¸€å€‹éˆè§’' },
                { type: 'equilateral', color: '#a855f7', ans: 'equilateral', hint: 'ä¸‰é‚Šä¸€æ¨£é•·' },
                { type: 'acute', color: '#22c55e', ans: 'acute', hint: 'ä¸‰å€‹éƒ½æ˜¯éŠ³è§’' },
                { type: 'isosceles', color: '#ef4444', ans: 'isosceles', hint: 'å…©é‚Šä¸€æ¨£é•·' },
            ];

            const handleSort = (bucket) => {
                const current = questions[qIndex];
                let isCorrect = false;
                
                // Logic map
                if (bucket === 'right' && current.ans === 'right') isCorrect = true;
                if (bucket === 'obtuse' && current.ans === 'obtuse') isCorrect = true;
                if (bucket === 'acute' && (current.ans === 'acute' || current.ans === 'equilateral')) isCorrect = true; // Equilateral is also acute
                
                // Special handling for Equilateral/Isosceles bins if we had them, 
                // but let's stick to Angle buckets for simplicity or make buckets dynamic.
                // Let's use 3 Angle Buckets for first few, then maybe switch? 
                // To keep it simple for resources class, let's just do Angle Classification for now as it's the main 4th grade topic.
                // Adjusted question list to be angle focused mainly or clear side properties.
                
                if (current.ans === 'equilateral' && bucket === 'acute') isCorrect = true; // æ­£ä¸‰è§’å½¢æ˜¯ç‰¹æ®Šçš„éŠ³è§’ä¸‰è§’å½¢
                if (current.ans === 'isosceles' && bucket === 'acute') isCorrect = true; // Our isosceles drawing is acute

                if (isCorrect) setScore(s => s + 1);

                if (qIndex < questions.length - 1) {
                    setQIndex(q => q + 1);
                } else {
                    setShowResult(true);
                }
            };

            if (showResult) {
                return (
                    <div className="text-center py-10 animate-pop">
                        <div className="text-6xl mb-4">ğŸ†</div>
                        <h2 className="text-3xl font-bold text-slate-800 mb-4">æŒ‘æˆ°å®Œæˆï¼</h2>
                        <p className="text-xl text-slate-600 mb-8">ä½ æ‹¿åˆ°äº† {score} / {questions.length} åˆ†</p>
                        <button onClick={onFinish} className="bg-emerald-500 text-white px-8 py-3 rounded-2xl font-bold text-lg shadow-lg btn-press">
                            é€²å…¥æœ€çµ‚æ¸¬é©—
                        </button>
                    </div>
                );
            }

            const current = questions[qIndex];

            return (
                <div className="flex flex-col items-center space-y-6">
                    <div className="w-full flex justify-between items-center px-4">
                        <span className="font-bold text-slate-400">ç¬¬ {qIndex + 1} / {questions.length} é¡Œ</span>
                        <div className="bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full font-bold">å¾—åˆ†: {score}</div>
                    </div>

                    <div className="bg-white p-8 rounded-full shadow-lg border-4 border-slate-100 animate-float">
                        <TriangleShape type={current.type} color={current.color} size={140} />
                    </div>
                    
                    <p className="text-slate-500 font-bold">é€™æ˜¯ä»€éº¼ä¸‰è§’å½¢ï¼Ÿ</p>

                    <div className="grid grid-cols-3 gap-3 w-full">
                        <button onClick={() => handleSort('right')} className="btn-press flex flex-col items-center bg-blue-50 p-4 rounded-xl border-2 border-blue-200">
                            <div className="text-3xl mb-2">âˆŸ</div>
                            <span className="font-bold text-blue-700">ç›´è§’<br/>ä¸‰è§’å½¢</span>
                        </button>
                        <button onClick={() => handleSort('obtuse')} className="btn-press flex flex-col items-center bg-orange-50 p-4 rounded-xl border-2 border-orange-200">
                            <div className="text-3xl mb-2">ï¼</div>
                            <span className="font-bold text-orange-700">éˆè§’<br/>ä¸‰è§’å½¢</span>
                        </button>
                        <button onClick={() => handleSort('acute')} className="btn-press flex flex-col items-center bg-green-50 p-4 rounded-xl border-2 border-green-200">
                            <div className="text-3xl mb-2">â–³</div>
                            <span className="font-bold text-green-700">éŠ³è§’<br/>ä¸‰è§’å½¢</span>
                        </button>
                    </div>
                </div>
            );
        };

        // --- 4. Final Quiz ---
        const FinalQuiz = ({ onRestart }) => {
            const [step, setStep] = useState(0);
            const [score, setScore] = useState(0);
            const [showResult, setShowResult] = useState(false);

            const quizData = [
                { q: "å¦‚æœä¸€å€‹ä¸‰è§’å½¢æœ‰ä¸€å€‹ç›´è§’ï¼Œå®ƒæ˜¯ä»€éº¼ä¸‰è§’å½¢ï¼Ÿ", options: ["éŠ³è§’ä¸‰è§’å½¢", "ç›´è§’ä¸‰è§’å½¢", "éˆè§’ä¸‰è§’å½¢"], ans: 1 },
                { q: "ã€Œå…¨ç­‰ã€çš„åœ–å½¢ï¼Œå½¢ç‹€å’Œå¤§å°æœƒæ€æ¨£ï¼Ÿ", options: ["ä¸ä¸€æ¨£", "å·®ä¸å¤š", "ä¸€æ¨¡ä¸€æ¨£"], ans: 2 },
                { q: "æ­£ä¸‰è§’å½¢çš„ä¸‰å€‹é‚Šé•·æœƒï¼Ÿ", options: ["éƒ½ä¸ä¸€æ¨£", "å…©é‚Šä¸€æ¨£", "ä¸‰é‚Šéƒ½ä¸€æ¨£é•·"], ans: 2 },
                { q: "éˆè§’ä¸‰è§’å½¢æœ‰å¹¾å€‹éˆè§’ï¼Ÿ", options: ["1å€‹", "2å€‹", "3å€‹"], ans: 0 },
            ];

            const handleAnswer = (idx) => {
                if (idx === quizData[step].ans) setScore(s => s + 1);
                
                if (step < quizData.length - 1) {
                    setStep(s => s + 1);
                } else {
                    setShowResult(true);
                }
            };

            if (showResult) {
                return (
                    <div className="text-center py-10 animate-pop">
                        <div className="text-6xl mb-4">ğŸ‰</div>
                        <h2 className="text-3xl font-bold text-slate-800 mb-2">å¤ªæ£’äº†ï¼</h2>
                        <p className="text-lg text-slate-600 mb-8">ä½ æ˜¯ä¸‰è§’å½¢å¤§å¸«ï¼<br/>ç¸½åˆ†ï¼š{score * 25} åˆ†</p>
                        <button onClick={onRestart} className="bg-slate-800 text-white px-8 py-4 rounded-2xl font-bold text-xl shadow-lg btn-press flex items-center justify-center mx-auto">
                            <RefreshIcon className="mr-2"/> å†ç©ä¸€æ¬¡
                        </button>
                    </div>
                );
            }

            return (
                <div className="max-w-md mx-auto">
                    <div className="bg-white p-6 rounded-3xl shadow-sm border-2 border-emerald-100 mb-6">
                        <span className="bg-emerald-100 text-emerald-800 px-3 py-1 rounded-lg text-sm font-bold mb-3 inline-block">å•é¡Œ {step + 1}</span>
                        <h3 className="text-xl font-bold text-slate-800 leading-relaxed">{quizData[step].q}</h3>
                    </div>
                    <div className="space-y-3">
                        {quizData[step].options.map((opt, idx) => (
                            <button 
                                key={idx} 
                                onClick={() => handleAnswer(idx)}
                                className="w-full text-left p-4 bg-white border-b-4 border-slate-200 rounded-xl font-bold text-slate-700 active:border-b-0 active:translate-y-1 transition-all hover:bg-emerald-50"
                            >
                                {opt}
                            </button>
                        ))}
                    </div>
                </div>
            );
        };

        // --- Main App Shell ---
        const App = () => {
            const [tab, setTab] = useState('learn'); // learn, congruence, game, quiz

            return (
                <div className="min-h-screen flex flex-col bg-emerald-50 max-w-2xl mx-auto shadow-2xl overflow-hidden">
                    {/* Header */}
                    <header className="bg-white p-4 shadow-sm border-b border-emerald-100 z-10 sticky top-0">
                        <div className="flex justify-between items-center">
                            <h1 className="text-xl font-black text-emerald-600 flex items-center tracking-tight">
                                <span className="bg-emerald-500 text-white p-1 rounded mr-2"><StarIcon size={16}/></span>
                                ä¸‰è§’å½¢è®Šè®Šè®Š
                            </h1>
                            <div className="text-xs font-bold bg-slate-100 text-slate-500 px-2 py-1 rounded">è³‡æºç­æ•¸å­¸ 4ä¸ŠCH7</div>
                        </div>
                    </header>

                    {/* Content Area */}
                    <main className="flex-1 p-4 pb-24 overflow-y-auto scroll-smooth">
                        {tab === 'learn' && <LearnSection onFinish={() => setTab('congruence')} />}
                        {tab === 'congruence' && <CongruenceGame onFinish={() => setTab('game')} />}
                        {tab === 'game' && <SortingGame onFinish={() => setTab('quiz')} />}
                        {tab === 'quiz' && <FinalQuiz onRestart={() => setTab('learn')} />}
                    </main>

                    {/* Bottom Navigation */}
                    <nav className="fixed bottom-0 w-full max-w-2xl bg-white border-t border-slate-200 pb-safe shadow-[0_-4px_20px_rgba(0,0,0,0.05)]">
                        <div className="flex justify-around items-end p-2">
                            <NavButton active={tab === 'learn'} onClick={() => setTab('learn')} icon={<BookIcon />} label="èªè­˜" />
                            <NavButton active={tab === 'congruence'} onClick={() => setTab('congruence')} icon={<ShapesIcon />} label="å…¨ç­‰" />
                            <NavButton active={tab === 'game'} onClick={() => setTab('game')} icon={<GameIcon />} label="åˆ†é¡" />
                            <NavButton active={tab === 'quiz'} onClick={() => setTab('quiz')} icon={<RulerIcon />} label="æ¸¬é©—" />
                        </div>
                    </nav>
                </div>
            );
        };

        const NavButton = ({ active, onClick, icon, label }) => (
            <button 
                onClick={onClick} 
                className={`flex flex-col items-center p-2 rounded-xl transition-all duration-300 ${active ? 'text-emerald-600 -translate-y-2' : 'text-slate-400'}`}
            >
                <div className={`p-2 rounded-full mb-1 ${active ? 'bg-emerald-100' : ''}`}>{icon}</div>
                <span className="text-xs font-bold">{label}</span>
                {active && <div className="w-1.5 h-1.5 bg-emerald-500 rounded-full mt-1"></div>}
            </button>
        );

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>